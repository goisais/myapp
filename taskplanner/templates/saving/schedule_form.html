{% extends "saving/base.html" %}
{% block title %}予定登録{% endblock %}

{% block content %}

<div class="tab-menu">
  <a href="{% url 'schedule_create' %}" class="tab active">予定入力</a>
  <a href="{% url 'schedule_priority' %}" class="tab">優先順位リスト</a>
</div>

<div class="schedule-container">
  <h2>予定登録</h2>

  <form method="post">
    {% csrf_token %}

    <div class="form-group">
      <label>タイトル</label>
      {{ form.title }}
    </div>

    <div class="form-group">
      <label>日時</label>
      {{ form.date }}
    </div>

    <div class="form-group">
      <label>重要度</label>
      {{ form.priority }}
    </div>


    <div class="form-group">
      <label>所要時間</label>
      {{ form.duration_choice }}
      {{ form.duration }}
    </div>

    <script>
      function toggleDurationInput(select) {
        var otherInput = document.querySelector('input[name="duration"]');
        if (select.value === 'other') {
          otherInput.style.display = '';
        } else {
          otherInput.style.display = 'none';
          otherInput.value = '';
        }
      }
      // 初期表示時の切り替え
      document.addEventListener('DOMContentLoaded', function () {
        var select = document.querySelector('select[name="duration_choice"]');
        if (select) toggleDurationInput(select);
        select && select.addEventListener('change', function () { toggleDurationInput(this); });
      });
    </script>

    <div class="form-group">
      <label>メモ</label>
      {{ form.memo }}
    </div>

    <button type="submit" class="submit-btn">追加する</button>
  </form>
</div>
{% endblock %}